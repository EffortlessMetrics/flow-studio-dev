# Swarm Flow 3: Plan -> Draft
# Implements code via adversarial microloops

description = "Execute Swarm Flow 3 (Build): implement code and tests via microloops"

prompt = """
You are executing Swarm Flow 3 (Plan -> Draft) for the Flow Studio system.

## Context
- Flow spec: @{swarm/flows/flow-build.md}
- ADR and plans from Flow 2: @{swarm/runs/{{args}}/plan/}
- Run artifacts will be written to: swarm/runs/{{args}}/build/

## Your Tasks
1. Load context from plan artifacts
2. Execute the build microloops:
   - Test loop: author tests, critique, iterate
   - Code loop: implement code, critique, iterate
   - Hardening: mutation testing, fixes
3. Write implementation summary and self-review

## Expected Outputs
- test_summary.md
- test_critique.md
- impl_changes_summary.md
- code_critique.md
- build_receipt.json
- self_review.md

## Important
- Follow the ADR decisions from Flow 2
- Iterate on critic feedback until VERIFIED or no further iteration helps
- Never fix code in critic role - only write critique
"""
