{
  "openapi": "3.1.0",
  "info": {
    "title": "Flow Studio API",
    "description": "Interactive visualization of swarm flows, steps, agents, and artifacts",
    "version": "2.0.0"
  },
  "paths": {
    "/": {
      "get": {
        "summary": "Index",
        "description": "Serve the Flow Studio HTML interface.",
        "operationId": "index__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "text/html": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/health": {
      "get": {
        "summary": "Api Health",
        "description": "Health check endpoint.",
        "operationId": "api_health_api_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthStatus"
                }
              }
            }
          }
        }
      }
    },
    "/api/profile": {
      "get": {
        "summary": "Api Current Profile",
        "description": "Get the currently loaded swarm profile.",
        "operationId": "api_current_profile_api_profile_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/profiles": {
      "get": {
        "summary": "Api List Profiles",
        "description": "List all available swarm profiles.",
        "operationId": "api_list_profiles_api_profiles_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/flows": {
      "get": {
        "summary": "Api Flows",
        "description": "List all flows.",
        "operationId": "api_flows_api_flows_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowsListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/{flow_key}": {
      "get": {
        "summary": "Api Graph",
        "description": "Get the graph (nodes and edges) for a flow.",
        "operationId": "api_graph_api_graph__flow_key__get",
        "parameters": [
          {
            "name": "flow_key",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Flow Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GraphPayload"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs": {
      "get": {
        "summary": "Api Runs",
        "description": "List available runs with pagination (active + examples).\n\nArgs:\n    limit: Maximum number of runs to return (default 100, max 500).\n    offset: Number of runs to skip from the beginning (default 0).\n\nDelegates to RunService for unified run discovery and metadata.\nFalls back to FlowStudioCore if RunService is unavailable.\n\nNote: Uses run_in_threadpool because list_runs() does filesystem\nwork (directory scanning, stat calls) that can be slow on WSL/Windows.",
        "operationId": "api_runs_api_runs_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RunsListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/summary": {
      "get": {
        "summary": "Api Run Summary",
        "description": "Get full run summary.",
        "operationId": "api_run_summary_api_runs__run_id__summary_get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RunSummary"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/backends": {
      "get": {
        "summary": "Api Backends",
        "description": "List available run backends and their capabilities.",
        "operationId": "api_backends_api_backends_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BackendsListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/run": {
      "post": {
        "summary": "Api Start Run",
        "description": "Start a new run.\n\nThis endpoint triggers execution of the specified flows using the\nRunService. The run executes asynchronously - use the run_id to\npoll for status.\n\nRequest body:\n    flows: List of flow keys to execute (required)\n    profile_id: Profile ID to use (optional)\n    backend: Backend to use (default: \"claude-harness\")",
        "operationId": "api_start_run_api_run_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StartRunRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StartRunResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/events": {
      "get": {
        "summary": "Api Run Events",
        "description": "Get all events for a run.",
        "operationId": "api_run_events_api_runs__run_id__events_get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RunEventsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/flows/{flow_key}/steps/{step_id}/transcript": {
      "get": {
        "summary": "Api Step Transcript",
        "description": "Get LLM transcript for a specific step.\n\nReturns the conversation transcript (system/user/assistant messages)\nfrom Claude or Gemini execution of a specific step.\n\nTranscripts are stored at:\n    RUN_BASE/<flow_key>/llm/<step_id>-*.jsonl\n\nResponse:\n    {\n        \"run_id\": \"...\",\n        \"flow_key\": \"...\",\n        \"step_id\": \"...\",\n        \"engine\": \"claude\" | \"gemini\" | null,\n        \"messages\": [\n            {\"ts\": \"...\", \"type\": \"system\", \"content\": \"...\"},\n            {\"ts\": \"...\", \"type\": \"user\", \"content\": \"...\"},\n            {\"ts\": \"...\", \"type\": \"assistant\", \"content\": \"...\", \"tool_calls\": [...]}\n        ]\n    }",
        "operationId": "api_step_transcript_api_runs__run_id__flows__flow_key__steps__step_id__transcript_get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          },
          {
            "name": "flow_key",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Flow Key"
            }
          },
          {
            "name": "step_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Step Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/flows/{flow_key}/steps/{step_id}/receipt": {
      "get": {
        "summary": "Api Step Receipt",
        "description": "Get step receipt (summary) for a specific step.\n\nReceipts are structured summaries of step execution stored at:\n    RUN_BASE/<flow_key>/receipts/<step_id>-<agent>.json\n\nResponse:\n    {\n        \"run_id\": \"...\",\n        \"flow_key\": \"...\",\n        \"step_id\": \"...\",\n        \"receipt\": {\n            \"engine\": \"claude\",\n            \"agent_key\": \"code-implementer\",\n            \"status\": \"VERIFIED\",\n            \"summary\": \"...\",\n            \"concerns\": [...],\n            \"next_actions\": [...]\n        }\n    }",
        "operationId": "api_step_receipt_api_runs__run_id__flows__flow_key__steps__step_id__receipt_get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          },
          {
            "name": "flow_key",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Flow Key"
            }
          },
          {
            "name": "step_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Step Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/cancel": {
      "post": {
        "summary": "Api Cancel Run",
        "description": "Cancel a running run.",
        "operationId": "api_cancel_run_api_runs__run_id__cancel_post",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/exemplar": {
      "post": {
        "summary": "Api Set Exemplar",
        "description": "Mark or unmark a run as an exemplar (for teaching mode).",
        "operationId": "api_set_exemplar_api_runs__run_id__exemplar_post",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          },
          {
            "name": "is_exemplar",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Is Exemplar"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/exemplars": {
      "get": {
        "summary": "Api List Exemplars",
        "description": "List all exemplar runs (for teaching mode).",
        "operationId": "api_list_exemplars_api_runs_exemplars_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/wisdom/summary": {
      "get": {
        "summary": "Api Run Wisdom Summary",
        "description": "Get wisdom summary for a run.\n\nReturns the structured wisdom_summary.json content if present,\nor 404 if no wisdom summary exists for this run.\n\nPart of v2.4.0 Flow Studio Wisdom UI integration.",
        "operationId": "api_run_wisdom_summary_api_runs__run_id__wisdom_summary_get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/platform/status": {
      "get": {
        "summary": "Platform Status",
        "description": "Get current governance status.\n\nIMPORTANT: This endpoint runs blocking subprocess calls (kernel_smoke,\nselftest, validate_swarm) so we offload to a threadpool to avoid\nblocking the async event loop and causing head-of-line blocking for\nother API requests.",
        "operationId": "platform_status_platform_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationSnapshot"
                }
              }
            }
          }
        }
      }
    },
    "/api/selftest/plan": {
      "get": {
        "summary": "Api Selftest Plan",
        "description": "Get selftest plan with all steps, tiers, and dependencies.",
        "operationId": "api_selftest_plan_api_selftest_plan_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SelftestPlanResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/validation": {
      "get": {
        "summary": "Api Validation",
        "description": "Return cached validation data (FR status badges and governance info).",
        "operationId": "api_validation_api_validation_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationData"
                }
              }
            }
          }
        }
      }
    },
    "/api/flows/{flow_key}": {
      "get": {
        "summary": "Api Flow Detail",
        "description": "Get detailed flow information with steps and agents.",
        "operationId": "api_flow_detail_api_flows__flow_key__get",
        "parameters": [
          {
            "name": "flow_key",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Flow Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowDetail"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/agents": {
      "get": {
        "summary": "Api Agents",
        "description": "Get full list of agents.",
        "operationId": "api_agents_api_agents_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentsListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/agents/{agent_key}/usage": {
      "get": {
        "summary": "Api Agent Usage",
        "description": "Get usage information for an agent: which flows and steps it appears in.",
        "operationId": "api_agent_usage_api_agents__agent_key__usage_get",
        "parameters": [
          {
            "name": "agent_key",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Agent Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentUsageResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/reload": {
      "post": {
        "summary": "Api Reload",
        "description": "Force reload all data from disk.",
        "operationId": "api_reload_api_reload_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReloadResponse"
                }
              }
            }
          }
        }
      }
    },
    "/platform/status/refresh": {
      "post": {
        "summary": "Platform Status Refresh",
        "description": "Force refresh of governance status (bypasses cache).\n\nIMPORTANT: This endpoint runs blocking subprocess calls (kernel_smoke,\nselftest, validate_swarm) so we offload to a threadpool to avoid\nblocking the async event loop.",
        "operationId": "platform_status_refresh_platform_status_refresh_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationSnapshot"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/sdlc": {
      "get": {
        "summary": "Api Run Sdlc",
        "description": "Get SDLC bar data for a run.",
        "operationId": "api_run_sdlc_api_runs__run_id__sdlc_get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SDLCBarResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/flows/{flow_key}": {
      "get": {
        "summary": "Api Run Flow",
        "description": "Get flow status for a run.",
        "operationId": "api_run_flow_api_runs__run_id__flows__flow_key__get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          },
          {
            "name": "flow_key",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Flow Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowStatusInfo"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/flows/{flow_key}/steps/{step_id}": {
      "get": {
        "summary": "Api Run Step",
        "description": "Get step status for a run.",
        "operationId": "api_run_step_api_runs__run_id__flows__flow_key__steps__step_id__get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          },
          {
            "name": "flow_key",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Flow Key"
            }
          },
          {
            "name": "step_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Step Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StepStatusInfo"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/timeline": {
      "get": {
        "summary": "Api Run Timeline",
        "description": "Get chronological event timeline for a run.",
        "operationId": "api_run_timeline_api_runs__run_id__timeline_get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TimelineResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/timing": {
      "get": {
        "summary": "Api Run Timing",
        "description": "Get timing summary for a run.",
        "operationId": "api_run_timing_api_runs__run_id__timing_get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RunTimingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/{run_id}/flows/{flow_key}/timing": {
      "get": {
        "summary": "Api Flow Timing",
        "description": "Get timing for a specific flow in a run.",
        "operationId": "api_flow_timing_api_runs__run_id__flows__flow_key__timing_get",
        "parameters": [
          {
            "name": "run_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Run Id"
            }
          },
          {
            "name": "flow_key",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Flow Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlowTimingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/runs/compare": {
      "get": {
        "summary": "Api Runs Compare",
        "description": "Compare two runs for a specific flow.",
        "operationId": "api_runs_compare_api_runs_compare_get",
        "parameters": [
          {
            "name": "run_a",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "First run identifier (baseline)",
              "title": "Run A"
            },
            "description": "First run identifier (baseline)"
          },
          {
            "name": "run_b",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Second run identifier (comparison target)",
              "title": "Run B"
            },
            "description": "Second run identifier (comparison target)"
          },
          {
            "name": "flow",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Flow key to compare",
              "title": "Flow"
            },
            "description": "Flow key to compare"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/{flow_key}/artifacts": {
      "get": {
        "summary": "Api Graph Artifacts",
        "description": "Get artifact-centric graph for a flow.",
        "operationId": "api_graph_artifacts_api_graph__flow_key__artifacts_get",
        "parameters": [
          {
            "name": "flow_key",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Flow Key"
            }
          },
          {
            "name": "run_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Optional run ID to overlay artifact status",
              "title": "Run Id"
            },
            "description": "Optional run ID to overlay artifact status"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GraphPayload"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/search": {
      "get": {
        "summary": "Api Search",
        "description": "Search across flows, steps, agents, and artifacts.",
        "operationId": "api_search_api_search_get",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Search query",
              "default": "",
              "title": "Q"
            },
            "description": "Search query"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/layout_screens": {
      "get": {
        "summary": "Api Layout Screens",
        "description": "Get layout screen specifications for UX review tooling.\n\nReturns the authoritative registry of screens, regions, and UIIDs\nthat MCP tools and run_layout_review.py can use to enumerate and\ncapture Flow Studio UI state.\n\nThis mirrors the TypeScript layout_spec.ts for Python consumers.",
        "operationId": "api_layout_screens_api_layout_screens_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/tours": {
      "get": {
        "summary": "Api Tours",
        "description": "List all available guided tours.",
        "operationId": "api_tours_api_tours_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToursListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tours/{tour_id}": {
      "get": {
        "summary": "Api Tour Detail",
        "description": "Get full tour definition with all steps.",
        "operationId": "api_tour_detail_api_tours__tour_id__get",
        "parameters": [
          {
            "name": "tour_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Tour Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TourDetail"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AgentInfo": {
        "properties": {
          "key": {
            "type": "string",
            "title": "Key",
            "description": "Unique agent identifier"
          },
          "category": {
            "type": "string",
            "title": "Category",
            "description": "Agent category (e.g., implementation, critic, verification)"
          },
          "color": {
            "type": "string",
            "title": "Color",
            "description": "Visual color code for agent's role family"
          },
          "model": {
            "type": "string",
            "title": "Model",
            "description": "Model assignment (inherit, haiku, sonnet, opus)"
          },
          "short_role": {
            "type": "string",
            "title": "Short Role",
            "description": "Brief description of agent's responsibility"
          }
        },
        "type": "object",
        "required": [
          "key",
          "category",
          "color",
          "model",
          "short_role"
        ],
        "title": "AgentInfo",
        "description": "Information about a single agent."
      },
      "AgentUsageInfo": {
        "properties": {
          "flow": {
            "type": "string",
            "title": "Flow",
            "description": "Flow key"
          },
          "flow_title": {
            "type": "string",
            "title": "Flow Title",
            "description": "Flow title"
          },
          "step": {
            "type": "string",
            "title": "Step",
            "description": "Step ID"
          },
          "step_title": {
            "type": "string",
            "title": "Step Title",
            "description": "Step title"
          }
        },
        "type": "object",
        "required": [
          "flow",
          "flow_title",
          "step",
          "step_title"
        ],
        "title": "AgentUsageInfo",
        "description": "Usage information for an agent in a specific flow/step."
      },
      "AgentUsageResponse": {
        "properties": {
          "agent": {
            "type": "string",
            "title": "Agent",
            "description": "Agent key"
          },
          "usage": {
            "items": {
              "$ref": "#/components/schemas/AgentUsageInfo"
            },
            "type": "array",
            "title": "Usage",
            "description": "List of flows/steps where agent is used"
          }
        },
        "type": "object",
        "required": [
          "agent",
          "usage"
        ],
        "title": "AgentUsageResponse",
        "description": "Response model for /api/agents/{agent_key}/usage endpoint."
      },
      "AgentsListResponse": {
        "properties": {
          "agents": {
            "items": {
              "$ref": "#/components/schemas/AgentInfo"
            },
            "type": "array",
            "title": "Agents",
            "description": "List of all agents"
          }
        },
        "type": "object",
        "required": [
          "agents"
        ],
        "title": "AgentsListResponse",
        "description": "Response model for /api/agents endpoint."
      },
      "ArtifactInfo": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path",
            "description": "Artifact file path relative to step directory"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Artifact status (present, missing, unknown)"
          },
          "required": {
            "type": "boolean",
            "title": "Required",
            "description": "Whether artifact is required or optional"
          }
        },
        "type": "object",
        "required": [
          "path",
          "status",
          "required"
        ],
        "title": "ArtifactInfo",
        "description": "Information about a single artifact."
      },
      "BackendCapabilitiesModel": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Backend identifier"
          },
          "label": {
            "type": "string",
            "title": "Label",
            "description": "Human-readable backend label"
          },
          "supports_streaming": {
            "type": "boolean",
            "title": "Supports Streaming",
            "description": "Whether backend supports streaming output",
            "default": false
          },
          "supports_events": {
            "type": "boolean",
            "title": "Supports Events",
            "description": "Whether backend emits events",
            "default": true
          },
          "supports_cancel": {
            "type": "boolean",
            "title": "Supports Cancel",
            "description": "Whether backend supports run cancellation",
            "default": false
          },
          "supports_replay": {
            "type": "boolean",
            "title": "Supports Replay",
            "description": "Whether backend supports replay",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "id",
          "label"
        ],
        "title": "BackendCapabilitiesModel",
        "description": "API model for backend capabilities."
      },
      "BackendsListResponse": {
        "properties": {
          "backends": {
            "items": {
              "$ref": "#/components/schemas/BackendCapabilitiesModel"
            },
            "type": "array",
            "title": "Backends",
            "description": "List of available backends"
          }
        },
        "type": "object",
        "required": [
          "backends"
        ],
        "title": "BackendsListResponse",
        "description": "Response for GET /api/backends."
      },
      "Capabilities": {
        "properties": {
          "runs": {
            "type": "boolean",
            "title": "Runs",
            "description": "Run inspector available for artifact tracking"
          },
          "timeline": {
            "type": "boolean",
            "title": "Timeline",
            "description": "Timeline feature available"
          },
          "governance": {
            "type": "boolean",
            "title": "Governance",
            "description": "Governance status provider available"
          },
          "validation": {
            "type": "boolean",
            "title": "Validation",
            "description": "Validation data available"
          }
        },
        "type": "object",
        "required": [
          "runs",
          "timeline",
          "governance",
          "validation"
        ],
        "title": "Capabilities",
        "description": "System capabilities available."
      },
      "FlowDetail": {
        "properties": {
          "flow": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Flow",
            "description": "Flow metadata (key, title, description)"
          },
          "steps": {
            "items": {
              "$ref": "#/components/schemas/StepInfo"
            },
            "type": "array",
            "title": "Steps",
            "description": "List of steps in execution order"
          },
          "agents": {
            "additionalProperties": {
              "$ref": "#/components/schemas/AgentInfo"
            },
            "type": "object",
            "title": "Agents",
            "description": "Dictionary of agents used by this flow"
          }
        },
        "type": "object",
        "required": [
          "flow",
          "steps",
          "agents"
        ],
        "title": "FlowDetail",
        "description": "Detailed flow information with steps and agents."
      },
      "FlowStatusInfo": {
        "properties": {
          "flow_key": {
            "type": "string",
            "title": "Flow Key",
            "description": "Flow identifier"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Flow status (not_started, in_progress, done)"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Flow title"
          },
          "decision_artifact": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Decision Artifact",
            "description": "Decision artifact filename if defined"
          },
          "decision_present": {
            "type": "boolean",
            "title": "Decision Present",
            "description": "Whether decision artifact is present"
          },
          "steps": {
            "additionalProperties": {
              "$ref": "#/components/schemas/StepStatusInfo"
            },
            "type": "object",
            "title": "Steps",
            "description": "Status for each step in flow"
          }
        },
        "type": "object",
        "required": [
          "flow_key",
          "status",
          "title",
          "decision_present",
          "steps"
        ],
        "title": "FlowStatusInfo",
        "description": "Status information for a single flow in a run."
      },
      "FlowSummary": {
        "properties": {
          "key": {
            "type": "string",
            "title": "Key",
            "description": "Unique flow identifier (e.g., 'signal', 'build')"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Human-readable flow title"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Brief description of flow purpose"
          },
          "step_count": {
            "type": "integer",
            "title": "Step Count",
            "description": "Number of steps in the flow"
          }
        },
        "type": "object",
        "required": [
          "key",
          "title",
          "description",
          "step_count"
        ],
        "title": "FlowSummary",
        "description": "Summary of a single flow for list view."
      },
      "FlowTiming": {
        "properties": {
          "flow_key": {
            "type": "string",
            "title": "Flow Key",
            "description": "Flow identifier"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At",
            "description": "ISO 8601 timestamp when flow started"
          },
          "ended_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ended At",
            "description": "ISO 8601 timestamp when flow ended"
          },
          "duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Seconds",
            "description": "Flow duration in seconds"
          },
          "steps": {
            "items": {
              "$ref": "#/components/schemas/StepTiming"
            },
            "type": "array",
            "title": "Steps",
            "description": "Timing for each step"
          }
        },
        "type": "object",
        "required": [
          "flow_key"
        ],
        "title": "FlowTiming",
        "description": "Timing information for a flow."
      },
      "FlowTimingResponse": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id",
            "description": "Run identifier"
          },
          "flow_key": {
            "type": "string",
            "title": "Flow Key",
            "description": "Flow identifier"
          },
          "timing": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FlowTiming"
              },
              {
                "type": "null"
              }
            ],
            "description": "Flow timing data if available"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Message if timing not available"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "flow_key"
        ],
        "title": "FlowTimingResponse",
        "description": "Response model for /api/runs/{run_id}/flows/{flow_key}/timing endpoint."
      },
      "FlowsListResponse": {
        "properties": {
          "flows": {
            "items": {
              "$ref": "#/components/schemas/FlowSummary"
            },
            "type": "array",
            "title": "Flows",
            "description": "List of available flows"
          }
        },
        "type": "object",
        "required": [
          "flows"
        ],
        "title": "FlowsListResponse",
        "description": "Response model for /api/flows endpoint."
      },
      "GovernanceStatus": {
        "properties": {
          "kernel": {
            "additionalProperties": true,
            "type": "object",
            "title": "Kernel",
            "description": "Kernel health status"
          },
          "selftest": {
            "additionalProperties": true,
            "type": "object",
            "title": "Selftest",
            "description": "Selftest status"
          },
          "validation": {
            "additionalProperties": true,
            "type": "object",
            "title": "Validation",
            "description": "Validation results"
          },
          "state": {
            "type": "string",
            "title": "State",
            "description": "Overall state (HEALTHY, DEGRADED, BROKEN)"
          },
          "degradations": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Degradations",
            "description": "Recent degradation entries"
          },
          "ac": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Ac",
            "description": "AC (Acceptance Criteria) status aggregation"
          }
        },
        "type": "object",
        "required": [
          "kernel",
          "selftest",
          "validation",
          "state"
        ],
        "title": "GovernanceStatus",
        "description": "Governance status information."
      },
      "GraphEdge": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Data",
            "description": "Edge data including id, source, target, and type"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "GraphEdge",
        "description": "Single edge in flow graph."
      },
      "GraphNode": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Data",
            "description": "Node data including id, label, type, and attributes"
          }
        },
        "type": "object",
        "required": [
          "data"
        ],
        "title": "GraphNode",
        "description": "Single node in flow graph."
      },
      "GraphPayload": {
        "properties": {
          "nodes": {
            "items": {
              "$ref": "#/components/schemas/GraphNode"
            },
            "type": "array",
            "title": "Nodes",
            "description": "List of graph nodes (steps, agents, artifacts)"
          },
          "edges": {
            "items": {
              "$ref": "#/components/schemas/GraphEdge"
            },
            "type": "array",
            "title": "Edges",
            "description": "List of graph edges (connections)"
          }
        },
        "type": "object",
        "required": [
          "nodes",
          "edges"
        ],
        "title": "GraphPayload",
        "description": "Graph data for visualization (nodes and edges)."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthStatus": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Overall health status (ok, degraded, error)"
          },
          "version": {
            "type": "string",
            "title": "Version",
            "description": "Flow Studio version"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "ISO 8601 timestamp of health check"
          },
          "flows": {
            "type": "integer",
            "title": "Flows",
            "description": "Number of flows loaded"
          },
          "agents": {
            "type": "integer",
            "title": "Agents",
            "description": "Number of agents loaded"
          },
          "selftest_status": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SelftestSummary"
              },
              {
                "type": "null"
              }
            ],
            "description": "Selftest status if available"
          },
          "capabilities": {
            "$ref": "#/components/schemas/Capabilities",
            "description": "Available system capabilities"
          }
        },
        "type": "object",
        "required": [
          "status",
          "version",
          "timestamp",
          "flows",
          "agents",
          "capabilities"
        ],
        "title": "HealthStatus",
        "description": "Response model for /api/health endpoint."
      },
      "ReloadResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Reload status (ok or error)"
          },
          "flows": {
            "type": "integer",
            "title": "Flows",
            "description": "Number of flows loaded"
          },
          "agents": {
            "type": "integer",
            "title": "Agents",
            "description": "Number of agents loaded"
          }
        },
        "type": "object",
        "required": [
          "status",
          "flows",
          "agents"
        ],
        "title": "ReloadResponse",
        "description": "Response model for /api/reload endpoint."
      },
      "RunEventModel": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id",
            "description": "Run identifier this event belongs to"
          },
          "ts": {
            "type": "string",
            "title": "Ts",
            "description": "ISO 8601 timestamp of the event"
          },
          "kind": {
            "type": "string",
            "title": "Kind",
            "description": "Event kind (e.g., 'step_started', 'step_completed')"
          },
          "flow_key": {
            "type": "string",
            "title": "Flow Key",
            "description": "Flow key this event relates to"
          },
          "step_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Step Id",
            "description": "Step ID if applicable"
          },
          "agent_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Agent Key",
            "description": "Agent key if applicable"
          },
          "payload": {
            "additionalProperties": true,
            "type": "object",
            "title": "Payload",
            "description": "Event-specific payload data"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "ts",
          "kind",
          "flow_key"
        ],
        "title": "RunEventModel",
        "description": "API model for run event."
      },
      "RunEventsResponse": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id",
            "description": "Run identifier"
          },
          "events": {
            "items": {
              "$ref": "#/components/schemas/RunEventModel"
            },
            "type": "array",
            "title": "Events",
            "description": "List of events for the run"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "events"
        ],
        "title": "RunEventsResponse",
        "description": "Response for GET /api/runs/{run_id}/events."
      },
      "RunInfo": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id",
            "description": "Unique run identifier"
          },
          "run_type": {
            "type": "string",
            "title": "Run Type",
            "description": "Type of run (active or example)"
          },
          "path": {
            "type": "string",
            "title": "Path",
            "description": "File system path to run directory"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title",
            "description": "Run title from metadata if available"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Run description from metadata"
          },
          "tags": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Tags",
            "description": "Tags from metadata"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "run_type",
          "path"
        ],
        "title": "RunInfo",
        "description": "Summary information about a run."
      },
      "RunSummary": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id",
            "description": "Unique run identifier"
          },
          "run_type": {
            "type": "string",
            "title": "Run Type",
            "description": "Type of run (active or example)"
          },
          "path": {
            "type": "string",
            "title": "Path",
            "description": "File system path to run directory"
          },
          "flows": {
            "additionalProperties": {
              "$ref": "#/components/schemas/FlowStatusInfo"
            },
            "type": "object",
            "title": "Flows",
            "description": "Status for each flow in run"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "run_type",
          "path",
          "flows"
        ],
        "title": "RunSummary",
        "description": "Complete summary of a run with all flow and step statuses."
      },
      "RunTiming": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id",
            "description": "Run identifier"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At",
            "description": "ISO 8601 timestamp when run started"
          },
          "ended_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ended At",
            "description": "ISO 8601 timestamp when run ended"
          },
          "total_duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Duration Seconds",
            "description": "Total run duration in seconds"
          },
          "flows": {
            "additionalProperties": {
              "$ref": "#/components/schemas/FlowTiming"
            },
            "type": "object",
            "title": "Flows",
            "description": "Timing for each flow"
          }
        },
        "type": "object",
        "required": [
          "run_id"
        ],
        "title": "RunTiming",
        "description": "Complete timing information for a run."
      },
      "RunTimingResponse": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id",
            "description": "Run identifier"
          },
          "timing": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/RunTiming"
              },
              {
                "type": "null"
              }
            ],
            "description": "Timing data if available"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Message if timing not available"
          }
        },
        "type": "object",
        "required": [
          "run_id"
        ],
        "title": "RunTimingResponse",
        "description": "Response model for /api/runs/{run_id}/timing endpoint."
      },
      "RunsListResponse": {
        "properties": {
          "runs": {
            "items": {
              "$ref": "#/components/schemas/RunInfo"
            },
            "type": "array",
            "title": "Runs",
            "description": "List of available runs"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of runs available"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Maximum runs returned in this response"
          },
          "offset": {
            "type": "integer",
            "title": "Offset",
            "description": "Number of runs skipped from the beginning"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether more runs are available beyond this page"
          }
        },
        "type": "object",
        "required": [
          "runs",
          "total",
          "limit",
          "offset",
          "has_more"
        ],
        "title": "RunsListResponse",
        "description": "Response model for /api/runs endpoint."
      },
      "SDLCBarResponse": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id",
            "description": "Run identifier"
          },
          "sdlc": {
            "items": {
              "$ref": "#/components/schemas/SDLCBarSegment"
            },
            "type": "array",
            "title": "Sdlc",
            "description": "SDLC progress bar segments"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "sdlc"
        ],
        "title": "SDLCBarResponse",
        "description": "Response model for /api/runs/{run_id}/sdlc endpoint."
      },
      "SDLCBarSegment": {
        "properties": {
          "flow": {
            "type": "string",
            "title": "Flow",
            "description": "Flow key"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Flow status (not_started, in_progress, done)"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Flow title for display"
          }
        },
        "type": "object",
        "required": [
          "flow",
          "status",
          "title"
        ],
        "title": "SDLCBarSegment",
        "description": "Single segment in SDLC progress bar."
      },
      "SearchResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/SearchResult"
            },
            "type": "array",
            "title": "Results",
            "description": "List of search results (max 8)"
          },
          "query": {
            "type": "string",
            "title": "Query",
            "description": "Original query string"
          }
        },
        "type": "object",
        "required": [
          "results",
          "query"
        ],
        "title": "SearchResponse",
        "description": "Response model for /api/search endpoint."
      },
      "SearchResult": {
        "properties": {
          "type": {
            "type": "string",
            "title": "Type",
            "description": "Result type (flow, step, agent, artifact)"
          },
          "id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id",
            "description": "Identifier for flow/step"
          },
          "key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Key",
            "description": "Agent key if agent result"
          },
          "flow": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Flow",
            "description": "Flow key if step/artifact result"
          },
          "step": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Step",
            "description": "Step ID if artifact result"
          },
          "file": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "File",
            "description": "Filename if artifact result"
          },
          "label": {
            "type": "string",
            "title": "Label",
            "description": "Display label for result"
          },
          "flows": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Flows",
            "description": "Associated flows if agent result"
          },
          "match": {
            "type": "string",
            "title": "Match",
            "description": "Matching query string"
          }
        },
        "type": "object",
        "required": [
          "type",
          "label",
          "match"
        ],
        "title": "SearchResult",
        "description": "Single search result."
      },
      "SelftestPlanResponse": {
        "properties": {
          "version": {
            "type": "string",
            "title": "Version",
            "description": "Selftest schema version"
          },
          "steps": {
            "items": {
              "$ref": "#/components/schemas/SelftestStepInfo"
            },
            "type": "array",
            "title": "Steps",
            "description": "All selftest steps"
          },
          "summary": {
            "additionalProperties": true,
            "type": "object",
            "title": "Summary",
            "description": "Summary with total and by_tier counts"
          }
        },
        "type": "object",
        "required": [
          "version",
          "steps",
          "summary"
        ],
        "title": "SelftestPlanResponse",
        "description": "Response model for /api/selftest/plan endpoint."
      },
      "SelftestStepInfo": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Step identifier (e.g., 'core-checks')"
          },
          "tier": {
            "type": "string",
            "title": "Tier",
            "description": "Tier: kernel, governance, optional"
          },
          "severity": {
            "type": "string",
            "title": "Severity",
            "description": "Severity: critical, warning, info"
          },
          "category": {
            "type": "string",
            "title": "Category",
            "description": "Category: correctness, governance"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Human-readable description"
          },
          "ac_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Ac Ids",
            "description": "Related acceptance criteria IDs"
          },
          "depends_on": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Depends On",
            "description": "Dependencies (step IDs)"
          }
        },
        "type": "object",
        "required": [
          "id",
          "tier",
          "severity",
          "category",
          "description"
        ],
        "title": "SelftestStepInfo",
        "description": "Information about a selftest step."
      },
      "SelftestSummary": {
        "properties": {
          "mode": {
            "type": "string",
            "title": "Mode",
            "description": "Selftest mode (strict, degraded, kernel-only)"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Overall status (GREEN, YELLOW, RED)"
          },
          "kernel_ok": {
            "type": "boolean",
            "title": "Kernel Ok",
            "description": "All kernel checks passed"
          },
          "governance_ok": {
            "type": "boolean",
            "title": "Governance Ok",
            "description": "All governance checks passed"
          },
          "optional_ok": {
            "type": "boolean",
            "title": "Optional Ok",
            "description": "All optional checks passed"
          },
          "failed_steps": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Failed Steps",
            "description": "List of failed step IDs"
          }
        },
        "type": "object",
        "required": [
          "mode",
          "status",
          "kernel_ok",
          "governance_ok",
          "optional_ok"
        ],
        "title": "SelftestSummary",
        "description": "Summary of selftest status."
      },
      "StartRunRequest": {
        "properties": {
          "flows": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Flows",
            "description": "List of flow keys to execute"
          },
          "profile_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile Id",
            "description": "Profile ID to use"
          },
          "backend": {
            "type": "string",
            "title": "Backend",
            "description": "Backend to use for execution",
            "default": "claude-harness"
          }
        },
        "type": "object",
        "required": [
          "flows"
        ],
        "title": "StartRunRequest",
        "description": "Request body for POST /api/run."
      },
      "StartRunResponse": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id",
            "description": "Unique identifier for the started run"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Initial run status"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable status message"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "status",
          "message"
        ],
        "title": "StartRunResponse",
        "description": "Response for POST /api/run."
      },
      "StepInfo": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique step identifier within flow"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Human-readable step title"
          },
          "role": {
            "type": "string",
            "title": "Role",
            "description": "Step role or description"
          },
          "agents": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Agents",
            "description": "List of agent keys assigned to this step"
          }
        },
        "type": "object",
        "required": [
          "id",
          "title",
          "role",
          "agents"
        ],
        "title": "StepInfo",
        "description": "Information about a single step in a flow."
      },
      "StepStatusInfo": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Step status (complete, partial, missing, n/a)"
          },
          "required_present": {
            "type": "integer",
            "title": "Required Present",
            "description": "Number of required artifacts present"
          },
          "required_total": {
            "type": "integer",
            "title": "Required Total",
            "description": "Total number of required artifacts"
          },
          "optional_present": {
            "type": "integer",
            "title": "Optional Present",
            "description": "Number of optional artifacts present"
          },
          "optional_total": {
            "type": "integer",
            "title": "Optional Total",
            "description": "Total number of optional artifacts"
          },
          "artifacts": {
            "items": {
              "$ref": "#/components/schemas/ArtifactInfo"
            },
            "type": "array",
            "title": "Artifacts",
            "description": "List of artifact statuses"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note",
            "description": "Optional note about step status"
          }
        },
        "type": "object",
        "required": [
          "status",
          "required_present",
          "required_total",
          "optional_present",
          "optional_total",
          "artifacts"
        ],
        "title": "StepStatusInfo",
        "description": "Status information for a single step in a run."
      },
      "StepTiming": {
        "properties": {
          "step_id": {
            "type": "string",
            "title": "Step Id",
            "description": "Step identifier"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At",
            "description": "ISO 8601 timestamp when step started"
          },
          "ended_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ended At",
            "description": "ISO 8601 timestamp when step ended"
          },
          "duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Seconds",
            "description": "Step duration in seconds"
          }
        },
        "type": "object",
        "required": [
          "step_id"
        ],
        "title": "StepTiming",
        "description": "Timing information for a single step."
      },
      "TimelineEvent": {
        "properties": {
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "ISO 8601 timestamp of event"
          },
          "flow": {
            "type": "string",
            "title": "Flow",
            "description": "Flow key"
          },
          "step": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Step",
            "description": "Step ID if applicable"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Event status (started, completed, failed)"
          },
          "duration_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Ms",
            "description": "Duration in milliseconds if completed"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note",
            "description": "Additional event notes"
          }
        },
        "type": "object",
        "required": [
          "timestamp",
          "flow",
          "status"
        ],
        "title": "TimelineEvent",
        "description": "Single event in run timeline."
      },
      "TimelineResponse": {
        "properties": {
          "run_id": {
            "type": "string",
            "title": "Run Id",
            "description": "Run identifier"
          },
          "events": {
            "items": {
              "$ref": "#/components/schemas/TimelineEvent"
            },
            "type": "array",
            "title": "Events",
            "description": "Chronological list of events"
          }
        },
        "type": "object",
        "required": [
          "run_id",
          "events"
        ],
        "title": "TimelineResponse",
        "description": "Response model for /api/runs/{run_id}/timeline endpoint."
      },
      "TourDetail": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique tour identifier"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Tour title"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Tour description"
          },
          "steps": {
            "items": {
              "$ref": "#/components/schemas/TourStep"
            },
            "type": "array",
            "title": "Steps",
            "description": "Tour steps in order"
          }
        },
        "type": "object",
        "required": [
          "id",
          "title",
          "description",
          "steps"
        ],
        "title": "TourDetail",
        "description": "Complete tour definition with all steps."
      },
      "TourStep": {
        "properties": {
          "target": {
            "$ref": "#/components/schemas/TourTarget",
            "description": "What to highlight in UI"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Step title"
          },
          "text": {
            "type": "string",
            "title": "Text",
            "description": "Step explanation text"
          },
          "action": {
            "type": "string",
            "title": "Action",
            "description": "Action to perform (select_flow, highlight_step, etc.)"
          }
        },
        "type": "object",
        "required": [
          "target",
          "title",
          "text",
          "action"
        ],
        "title": "TourStep",
        "description": "Single step in a guided tour."
      },
      "TourSummary": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique tour identifier"
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Tour title"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Tour description"
          },
          "step_count": {
            "type": "integer",
            "title": "Step Count",
            "description": "Number of steps in tour"
          }
        },
        "type": "object",
        "required": [
          "id",
          "title",
          "description",
          "step_count"
        ],
        "title": "TourSummary",
        "description": "Summary of a guided tour for list view."
      },
      "TourTarget": {
        "properties": {
          "type": {
            "type": "string",
            "title": "Type",
            "description": "Target type (flow, step, agent)"
          },
          "flow": {
            "type": "string",
            "title": "Flow",
            "description": "Flow key if applicable"
          },
          "step": {
            "type": "string",
            "title": "Step",
            "description": "Step ID if applicable"
          }
        },
        "type": "object",
        "required": [
          "type",
          "flow",
          "step"
        ],
        "title": "TourTarget",
        "description": "Target specification for a tour step."
      },
      "ToursListResponse": {
        "properties": {
          "tours": {
            "items": {
              "$ref": "#/components/schemas/TourSummary"
            },
            "type": "array",
            "title": "Tours",
            "description": "List of available tours"
          }
        },
        "type": "object",
        "required": [
          "tours"
        ],
        "title": "ToursListResponse",
        "description": "Response model for /api/tours endpoint."
      },
      "ValidationData": {
        "properties": {
          "data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data",
            "description": "Validation data if available"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if validation unavailable"
          }
        },
        "type": "object",
        "title": "ValidationData",
        "description": "Validation data for governance overlays."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "ValidationSnapshot": {
        "properties": {
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "ISO 8601 timestamp of snapshot"
          },
          "service": {
            "type": "string",
            "title": "Service",
            "description": "Service name (flow-studio)"
          },
          "governance": {
            "$ref": "#/components/schemas/GovernanceStatus",
            "description": "Governance status details"
          },
          "flows": {
            "additionalProperties": true,
            "type": "object",
            "title": "Flows",
            "description": "Flow-level validation details"
          },
          "agents": {
            "additionalProperties": true,
            "type": "object",
            "title": "Agents",
            "description": "Agent-level validation details"
          },
          "hints": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Hints",
            "description": "Remediation hints"
          }
        },
        "type": "object",
        "required": [
          "timestamp",
          "service",
          "governance",
          "flows",
          "agents",
          "hints"
        ],
        "title": "ValidationSnapshot",
        "description": "Snapshot of validation/governance status."
      }
    }
  }
}