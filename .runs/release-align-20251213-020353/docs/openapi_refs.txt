Makefile:261:.PHONY: dump-openapi-schema
Makefile:262:dump-openapi-schema:
Makefile:264:	@uv run python -c "from swarm.tools.flow_studio_fastapi import app; import json; from pathlib import Path; schema = app.openapi(); out = Path('docs/flowstudio-openapi.json'); out.write_text(json.dumps(schema, indent=2)); print(f'✓ Schema dumped to {out}')"
Makefile:266:.PHONY: validate-openapi-schema
Makefile:267:validate-openapi-schema:
Makefile:271:.PHONY: check-openapi-breaking-changes
Makefile:272:check-openapi-breaking-changes:
Makefile:277:.PHONY: diff-openapi-schema
Makefile:278:diff-openapi-schema: dump-openapi-schema
Makefile:280:	@git diff --color-words docs/flowstudio-openapi.json || echo "✓ No changes detected"
Makefile:285:	@echo "  Baseline: docs/flowstudio-openapi.json"
Makefile:287:	@echo "  Live: http://localhost:5000/redoc (ReDoc)"
Makefile:288:	@echo "  Live: http://localhost:5000/openapi.json (raw schema)"
Makefile:291:	@echo "  make dump-openapi-schema           # Export current schema"
Makefile:292:	@echo "  make validate-openapi-schema       # Test stability"
Makefile:293:	@echo "  make check-openapi-breaking-changes # Detect removals"
Makefile:294:	@echo "  make diff-openapi-schema           # Show git diff"
Makefile:979:	@$(MAKE) validate-openapi-schema
tests/test_flow_studio_schema_stability.py:6:schema against a committed baseline (`docs/flowstudio-openapi.json`).
tests/test_flow_studio_schema_stability.py:20:make validate-openapi-schema
tests/test_flow_studio_schema_stability.py:34:make dump-openapi-schema
tests/test_flow_studio_schema_stability.py:35:git add docs/flowstudio-openapi.json
tests/test_flow_studio_schema_stability.py:65:    """Load the committed baseline schema from docs/flowstudio-openapi.json.
tests/test_flow_studio_schema_stability.py:70:    baseline_path = repo_root / "docs" / "flowstudio-openapi.json"
tests/test_flow_studio_schema_stability.py:73:            "Baseline schema not found; run 'make dump-openapi-schema' first"
tests/test_flow_studio_schema_stability.py:90:    def test_openapi_version_unchanged(self, client, baseline_schema):
tests/test_flow_studio_schema_stability.py:96:        current_schema = client.get("/openapi.json").json()
tests/test_flow_studio_schema_stability.py:97:        assert current_schema["openapi"] == baseline_schema["openapi"], (
tests/test_flow_studio_schema_stability.py:98:            f"OpenAPI version changed: {baseline_schema['openapi']} → "
tests/test_flow_studio_schema_stability.py:99:            f"{current_schema['openapi']}"
tests/test_flow_studio_schema_stability.py:108:        current_schema = client.get("/openapi.json").json()
tests/test_flow_studio_schema_stability.py:122:                f"'make dump-openapi-schema'"
tests/test_flow_studio_schema_stability.py:131:        current_schema = client.get("/openapi.json").json()
tests/test_flow_studio_schema_stability.py:139:            f"'make dump-openapi-schema'"
tests/test_flow_studio_schema_stability.py:148:        current_schema = client.get("/openapi.json").json()
tests/test_flow_studio_schema_stability.py:180:            f"'make dump-openapi-schema'"
tests/test_flow_studio_schema_stability.py:189:        current_schema = client.get("/openapi.json").json()
tests/test_flow_studio_schema_stability.py:211:        current_schema = client.get("/openapi.json").json()
tests/test_flow_studio_schema_stability.py:232:        assert "openapi" in baseline_schema, (
tests/test_flow_studio_schema_stability.py:233:            "Baseline schema should have 'openapi' version field"
tests/test_flow_studio_schema_stability.py:245:        Both should have the same top-level keys (openapi, info, paths, etc.).
tests/test_flow_studio_schema_stability.py:247:        current_schema = client.get("/openapi.json").json()
tests/test_flow_studio_schema_stability.py:263:    def test_dump_openapi_schema_command_works(self):
tests/test_flow_studio_schema_stability.py:264:        """Test that the make dump-openapi-schema command can be executed.
tests/test_flow_studio_schema_stability.py:270:        # This is what 'make dump-openapi-schema' does
tests/test_flow_studio_schema_stability.py:271:        schema = app.openapi()
tests/test_flow_studio_schema_stability.py:274:        assert "openapi" in schema, "Schema should have OpenAPI version"
tests/test_flow_studio_schema_stability.py:277:    def test_live_openapi_endpoint_matches_baseline_structure(self, client, baseline_schema):
tests/test_flow_studio_schema_stability.py:278:        """Test that /openapi.json returns structurally compatible schema.
tests/test_flow_studio_schema_stability.py:282:        response = client.get("/openapi.json")
tests/test_flow_studio_schema_stability.py:288:        assert "openapi" in current_schema
docs/MAINTAINING_FLOW_STUDIO.md:35:**Contract baseline**: `docs/flowstudio-openapi.json` (committed)
docs/MAINTAINING_FLOW_STUDIO.md:71:make dump-openapi-schema
docs/MAINTAINING_FLOW_STUDIO.md:74:This writes `docs/flowstudio-openapi.json` with the updated schema.
docs/MAINTAINING_FLOW_STUDIO.md:79:make validate-openapi-schema
docs/MAINTAINING_FLOW_STUDIO.md:142:The schema baseline (`docs/flowstudio-openapi.json`) is the **contract** for Flow Studio's API.
docs/MAINTAINING_FLOW_STUDIO.md:147:make dump-openapi-schema           # Export current schema from FastAPI app
docs/MAINTAINING_FLOW_STUDIO.md:148:make validate-openapi-schema       # Run stability tests
docs/MAINTAINING_FLOW_STUDIO.md:149:make check-openapi-breaking-changes # Detect removals
docs/MAINTAINING_FLOW_STUDIO.md:150:make diff-openapi-schema           # Show git diff of schema
docs/MAINTAINING_FLOW_STUDIO.md:161:- Review `git diff docs/flowstudio-openapi.json` carefully
docs/MAINTAINING_FLOW_STUDIO.md:163:- Run `make validate-openapi-schema` first
docs/MAINTAINING_FLOW_STUDIO.md:212:2. `make validate-openapi-schema` — API contract stability
docs/MAINTAINING_FLOW_STUDIO.md:234:   make dump-openapi-schema
docs/MAINTAINING_FLOW_STUDIO.md:235:   make validate-openapi-schema
docs/MAINTAINING_FLOW_STUDIO.md:254:   make dump-openapi-schema
docs/MAINTAINING_FLOW_STUDIO.md:259:   make diff-openapi-schema
docs/MAINTAINING_FLOW_STUDIO.md:328:1. Check `git diff docs/flowstudio-openapi.json`
docs/MAINTAINING_FLOW_STUDIO.md:333:make diff-openapi-schema
docs/MAINTAINING_FLOW_STUDIO.md:335:git checkout docs/flowstudio-openapi.json  # if accidental
docs/MAINTAINING_FLOW_STUDIO.md:383:make dump-openapi-schema            # Export OpenAPI schema
docs/MAINTAINING_FLOW_STUDIO.md:384:make diff-openapi-schema            # Show schema changes
docs/MAINTAINING_FLOW_STUDIO.md:387:make validate-openapi-schema        # Run stability tests
docs/MAINTAINING_FLOW_STUDIO.md:388:make check-openapi-breaking-changes # Detect endpoint removals
docs/MAINTAINING_FLOW_STUDIO.md:416:1. Check `git diff docs/flowstudio-openapi.json` after `make dump-openapi-schema`
docs/MAINTAINING_FLOW_STUDIO.md:417:2. Run `make validate-openapi-schema` to see what breaks
docs/ADOPTING_SELFTEST_CORE.md:743:  - id: openapi-validate
docs/ADOPTING_SELFTEST_CORE.md:745:    command: openapi-spec-validator api/openapi.yaml
docs/flowstudio-openapi.json:2:  "openapi": "3.1.0",
docs/FLOW_STUDIO_API.md:3:> **OpenAPI baseline**: `docs/flowstudio-openapi.json`
docs/FLOW_STUDIO_API.md:6:> - ReDoc: `http://localhost:5000/redoc`
docs/FLOW_STUDIO_API.md:7:> - Raw schema: `http://localhost:5000/openapi.json`
docs/FLOW_STUDIO_API.md:9:This document specifies the stable API contract for Flow Studio, supporting both external integrations and internal Flow Studio UI consumption. The JSON schema in `docs/flowstudio-openapi.json` is the source of truth for contracts and tooling.
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:71:- `test_openapi_endpoint_returns_200()` — Verifies `/openapi.json` is accessible
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:72:- `test_openapi_returns_json()` — Validates JSON response format
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:73:- `test_openapi_schema_has_required_keys()` — Checks `openapi`, `info`, `paths`
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:74:- `test_openapi_has_valid_version()` — Verifies OpenAPI 3.x compliance
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:75:- `test_openapi_info_has_required_fields()` — Validates metadata
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:76:- `test_openapi_paths_is_object()` — Confirms paths structure
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:77:- `test_openapi_documents_health_endpoint()` — Verifies `/api/health` documented
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:78:- `test_openapi_documents_flows_endpoint()` — Verifies `/api/flows` documented
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:79:- `test_openapi_endpoint_has_methods()` — Validates HTTP methods
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:80:- `test_openapi_endpoints_have_responses()` — Confirms response definitions
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:81:- `test_openapi_paths_not_empty()` — Ensures endpoints are documented
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:82:- `test_openapi_has_servers_or_no_servers()` — Validates servers field
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:83:- `test_openapi_components_valid_if_present()` — Checks components structure
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:84:- `test_openapi_schema_is_self_consistent()` — Validates type consistency
docs/archive/FASTAPI_MIGRATION_COMPLETE.md:208:- ✅ OpenAPI schema stability (`make validate-openapi-schema`)
swarm/tools/flowstudio_smoke.py:54:    ("GET", "/openapi.json", "OpenAPI schema", 10.0),
swarm/tools/flowstudio_smoke.py:88:        code, _, _ = http("GET", "/openapi.json", timeout=2.0)
swarm/tools/flowstudio_smoke.py:383:            print("ERROR: Server did not become ready (GET /openapi.json never returned 200)")
tests/test_flow_studio_fastapi_comprehensive.py:34:- The /openapi.json endpoint returns 200 OK
tests/test_flow_studio_fastapi_comprehensive.py:35:- The response is valid JSON and contains required keys (openapi, info, paths)
tests/test_flow_studio_fastapi_comprehensive.py:1024:    def test_openapi_endpoint_returns_200(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1025:        """Test /openapi.json endpoint returns 200 OK."""
tests/test_flow_studio_fastapi_comprehensive.py:1026:        resp = client.get("/openapi.json")
tests/test_flow_studio_fastapi_comprehensive.py:1031:    def test_openapi_returns_json(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1032:        """Test /openapi.json returns valid JSON."""
tests/test_flow_studio_fastapi_comprehensive.py:1033:        resp = client.get("/openapi.json")
tests/test_flow_studio_fastapi_comprehensive.py:1045:    def test_openapi_schema_has_required_keys(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1047:        resp = client.get("/openapi.json")
tests/test_flow_studio_fastapi_comprehensive.py:1051:        required_keys = {"openapi", "info", "paths"}
tests/test_flow_studio_fastapi_comprehensive.py:1059:    def test_openapi_has_valid_version(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1061:        resp = client.get("/openapi.json")
tests/test_flow_studio_fastapi_comprehensive.py:1065:        openapi_version = schema.get("openapi")
tests/test_flow_studio_fastapi_comprehensive.py:1068:        assert openapi_version is not None, "Missing 'openapi' version"
tests/test_flow_studio_fastapi_comprehensive.py:1069:        assert isinstance(openapi_version, str), "'openapi' should be a string"
tests/test_flow_studio_fastapi_comprehensive.py:1070:        assert openapi_version.startswith("3."), (
tests/test_flow_studio_fastapi_comprehensive.py:1071:            f"Expected OpenAPI 3.x, got {openapi_version}"
tests/test_flow_studio_fastapi_comprehensive.py:1074:    def test_openapi_info_has_required_fields(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1076:        resp = client.get("/openapi.json")
tests/test_flow_studio_fastapi_comprehensive.py:1089:    def test_openapi_paths_is_object(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1091:        resp = client.get("/openapi.json")
tests/test_flow_studio_fastapi_comprehensive.py:1099:    def test_openapi_documents_health_endpoint(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1101:        resp = client.get("/openapi.json")
tests/test_flow_studio_fastapi_comprehensive.py:1112:    def test_openapi_documents_flows_endpoint(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1114:        resp = client.get("/openapi.json")
tests/test_flow_studio_fastapi_comprehensive.py:1125:    def test_openapi_endpoint_has_methods(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1127:        resp = client.get("/openapi.json")
tests/test_flow_studio_fastapi_comprehensive.py:1149:    def test_openapi_endpoints_have_responses(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1151:        resp = client.get("/openapi.json")
tests/test_flow_studio_fastapi_comprehensive.py:1177:    def test_openapi_paths_not_empty(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1179:        resp = client.get("/openapi.json")
tests/test_flow_studio_fastapi_comprehensive.py:1189:    def test_openapi_has_servers_or_no_servers(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1191:        resp = client.get("/openapi.json")
tests/test_flow_studio_fastapi_comprehensive.py:1208:    def test_openapi_components_valid_if_present(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1210:        resp = client.get("/openapi.json")
tests/test_flow_studio_fastapi_comprehensive.py:1232:    def test_openapi_schema_is_self_consistent(self, client):
tests/test_flow_studio_fastapi_comprehensive.py:1234:        resp = client.get("/openapi.json")
swarm/examples/health-check/plan/api_contracts.yaml:1:openapi: 3.0.0
