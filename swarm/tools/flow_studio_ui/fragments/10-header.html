  <header role="banner" data-uiid="flow_studio.header">
    <div>
      <h1>Flow Studio</h1>
      <div class="muted">Interactive node graph of flows, steps, and agents</div>
    <div class="search-container" data-uiid="flow_studio.header.search">
      <span class="search-icon" aria-hidden="true">&#128269;</span>
      <input type="text" id="search-input" class="search-input" placeholder="Search flows, steps, agents, artifacts... (press /)" autocomplete="off" aria-label="Search flows, steps, agents, and artifacts" data-uiid="flow_studio.header.search.input" />
      <div id="search-dropdown" class="search-dropdown" role="listbox" aria-label="Search results" data-uiid="flow_studio.header.search.results"></div>
    </div>
    </div>
    <nav style="display: flex; align-items: center; gap: 16px;" role="navigation" aria-label="Flow Studio controls" data-uiid="flow_studio.header.controls">
      <div class="tour-dropdown" id="tour-dropdown" data-uiid="flow_studio.header.tour">
        <button id="tour-btn" class="tour-dropdown-btn" title="Start a guided tour" aria-haspopup="true" aria-expanded="false" data-uiid="flow_studio.header.tour.trigger">
          <span>Tour</span>
          <span style="font-size: 10px;">▼</span>
        </button>
        <div id="tour-menu" class="tour-dropdown-menu" role="menu" aria-label="Available tours" data-uiid="flow_studio.header.tour.menu"></div>
      </div>
      <div class="mode-toggle" role="group" aria-label="View mode" data-uiid="flow_studio.header.mode">
        <button id="mode-author" class="active" title="Show all paths, CLI commands, and technical details" aria-pressed="true" data-uiid="flow_studio.header.mode.author">Author</button>
        <button id="mode-operator" title="Simplified view focused on run status and decisions" aria-pressed="false" data-uiid="flow_studio.header.mode.operator">Operator</button>
      </div>
      <div id="profile-badge" class="muted fs-profile-badge" style="display: flex; align-items: center; gap: 6px; cursor: pointer;" title="Current swarm profile" role="status" aria-live="polite" data-uiid="flow_studio.header.profile">
        <span id="profile-icon" aria-hidden="true">&#128230;</span>
        <span id="profile-text">Profile: Loading...</span>
      </div>
      <div id="governance-badge" class="muted" style="display: flex; align-items: center; gap: 6px; padding: 4px 10px; background: #f3f4f6; border-radius: 4px; cursor: pointer;" title="Click to view governance status" role="status" aria-live="polite" data-uiid="flow_studio.header.governance">
        <span id="governance-icon" aria-hidden="true">⏳</span>
        <span id="governance-text">Checking...</span>
        <span id="governance-issues-count" class="governance-issues-badge" style="display: none;">0</span>
      </div>
      <label id="governance-toggle" class="governance-toggle author-only" title="Highlight governance issues on graph nodes" data-uiid="flow_studio.header.governance.overlay">
        <input type="checkbox" id="governance-overlay-checkbox" />
        <span>Show Issues</span>
      </label>
      <button id="teaching-mode-toggle" class="teaching-mode-toggle" title="Enable Teaching Mode for learning-focused features" aria-pressed="false" data-uiid="flow_studio.header.teaching_mode.toggle">
        <span class="teaching-mode-icon" aria-hidden="true">&#127891;</span>
        <span class="teaching-mode-label">Teach</span>
      </button>
      <div class="muted author-only" data-uiid="flow_studio.header.reload">
        <span class="mono">make dev-check</span>
        <button id="reload-btn" style="margin-left: 4px; padding: 4px 8px; font-size: 11px; cursor: pointer; border: 1px solid #d1d5db; background: #f3f4f6; border-radius: 3px;" data-uiid="flow_studio.header.reload.btn">Reload</button>
      </div>
      <button id="help-btn" style="display: flex; align-items: center; justify-content: center; width: 24px; height: 24px; border-radius: 50%; background: #e5e7eb; color: #374151; font-size: 14px; font-weight: bold; border: none; cursor: pointer;" title="Flow Studio help" aria-label="Show keyboard shortcuts" data-uiid="flow_studio.header.help">?</button>
    </nav>
  </header>
